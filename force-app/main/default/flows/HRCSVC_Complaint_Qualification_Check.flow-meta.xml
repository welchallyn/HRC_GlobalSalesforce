<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>49.0</apiVersion>
    <assignments>
        <name>CQ_Troubleshooting_True</name>
        <label>CQ Troubleshooting True</label>
        <locationX>438</locationX>
        <locationY>522</locationY>
        <assignmentItems>
            <assignToReference>$Record.HRCSVC21_CQ_Required_fieldset__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Work_Order_on_CQ</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Open_Work_Orders_flag</name>
        <label>Set Open Work Orders flag</label>
        <locationX>1112</locationX>
        <locationY>986</locationY>
        <assignmentItems>
            <assignToReference>$Record.HRCSVC_Open_Work_Orders__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_Prevent_Close_False</name>
        <label>Set Prevent Close False</label>
        <locationX>564</locationX>
        <locationY>191</locationY>
        <assignmentItems>
            <assignToReference>$Record.HRCSVC_Prevent_Case_Close__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_SW_Version_Flag</name>
        <label>Set SW Version Flag</label>
        <locationX>427</locationX>
        <locationY>1190</locationY>
        <assignmentItems>
            <assignToReference>$Record.HRCSVC_SW_Version_Missing__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Update_CQ_Troubleshooting</name>
        <label>Update CQ Troubleshooting</label>
        <locationX>254</locationX>
        <locationY>326</locationY>
        <assignmentItems>
            <assignToReference>$Record.HRCSVC21_CQ_Required_fieldset__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Update_false</name>
        <label>Prevent Close True</label>
        <locationX>630</locationX>
        <locationY>894</locationY>
        <assignmentItems>
            <assignToReference>$Record.HRCSVC_Prevent_Case_Close__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <description>Update HRCSV_Is_Complain_Qualification_Exist__c on case if complain record exists</description>
        <name>Update_Field_On_Case</name>
        <label>Update Field On Case</label>
        <locationX>897</locationX>
        <locationY>313</locationY>
        <assignmentItems>
            <assignToReference>$Record.HRCSVC_Is_Complain_Qualification_Exist__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Work_Order_related_to_CQ</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Field_On_Case2</name>
        <label>Prevent Close False</label>
        <locationX>198</locationX>
        <locationY>915</locationY>
        <assignmentItems>
            <assignToReference>$Record.HRCSVC_Prevent_Case_Close__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Software_Version_Missing</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Canceled_Case</name>
        <label>Canceled Case?</label>
        <locationX>448</locationX>
        <locationY>92</locationY>
        <defaultConnector>
            <targetReference>Get_Complain_Qualification_Records</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Canceled_Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Canceled</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Prevent_Close_False</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Case_Should_Not_Be_Closed</name>
        <label>Case Should Not Be Closed</label>
        <locationX>429</locationX>
        <locationY>902</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Prevent_Closure</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Get_Complain_Qualification_Records.HRCSVC_Aware_Date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Complain_Qualification_Records.HRCSVC_Injury_or_Death__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_false</targetReference>
            </connector>
            <label>Prevent Closure</label>
        </rules>
        <rules>
            <name>Allow_Closure</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Complain_Qualification_Records.HRCSVC_Aware_Date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Complain_Qualification_Records.HRCSVC_Injury_or_Death__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Field_On_Case2</targetReference>
            </connector>
            <label>Allow Closure</label>
        </rules>
    </decisions>
    <decisions>
        <name>Closing_Care_Comm</name>
        <label>Closing Care Comm</label>
        <locationX>1094</locationX>
        <locationY>484</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Closing_Care_Comm_Yes</name>
            <conditionLogic>1 AND (2 OR 3)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordType.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Care Comm</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Resolved</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Open_Work_Orders</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Closing_Case</name>
        <label>Closing Case?</label>
        <locationX>603</locationX>
        <locationY>324</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Closing_Case_Yes</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Resolved</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>CQ_Reqd_fields_exists</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Complain_Records_Check</name>
        <label>Complain Records Check</label>
        <locationX>1092</locationX>
        <locationY>317</locationY>
        <defaultConnector>
            <targetReference>Closing_Care_Comm</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>If_complain_record_exist</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Complain_Qualification_Records</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Field_On_Case</targetReference>
            </connector>
            <label>If complain record exist</label>
        </rules>
    </decisions>
    <decisions>
        <name>CQ_Reqd_fields_exists</name>
        <label>CQ Reqd fields exists?</label>
        <locationX>426</locationX>
        <locationY>334</locationY>
        <defaultConnector>
            <targetReference>CQ_Troubleshooting_True</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Yes</defaultConnectorLabel>
        <rules>
            <name>Doc_Troubleshooting_No</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Get_Complain_Qualification_Records.HRCSVC_Document_troubleshooting__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Complain_Qualification_Records.HRCSVC_Occurrence_Location__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Complain_Qualification_Records.HRCSVC20_Complaint_Resolution__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_CQ_Troubleshooting</targetReference>
            </connector>
            <label>No</label>
        </rules>
    </decisions>
    <decisions>
        <name>Open_Work_Orders_Exist</name>
        <label>Open Work Orders Exist</label>
        <locationX>1104</locationX>
        <locationY>792</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Open_Work_Orders_Exist_Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Open_Work_Orders</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Open_Work_Orders_flag</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Software_Version_Missing</name>
        <label>Software Version Missing</label>
        <locationX>416</locationX>
        <locationY>1043</locationY>
        <defaultConnector>
            <targetReference>Closing_Care_Comm</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Software_Version_Missing_Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.HRCSVC_Software_Version__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_SW_Version_Flag</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Work_Order_is_Open</name>
        <label>Work Order is Open</label>
        <locationX>744</locationX>
        <locationY>716</locationY>
        <defaultConnector>
            <targetReference>Case_Should_Not_Be_Closed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>WO_Open</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Work_Order_related_to_CQ.Status</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>SC</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Work_Order_related_to_CQ.Status</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>SE</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Work_Order_related_to_CQ.Status</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>SP</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Open_Work_Orders_flag</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Work_Order_on_CQ</name>
        <label>Work Order on CQ</label>
        <locationX>426</locationX>
        <locationY>702</locationY>
        <defaultConnector>
            <targetReference>Case_Should_Not_Be_Closed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Work_Order_Exists</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Work_Order_related_to_CQ</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Work_Order_is_Open</targetReference>
            </connector>
            <label>Exists</label>
        </rules>
    </decisions>
    <description>Added logic for GSC-315</description>
    <interviewLabel>Complaint Qualification Check {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Complaint Qualification Check</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Get_Complain_Qualification_Records</name>
        <label>Get Complain Qualification Records</label>
        <locationX>1100</locationX>
        <locationY>107</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Complain_Records_Check</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>HRCSVC_Case__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>HRCSVC_Complaint_Qualification__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Open_Work_Orders</name>
        <label>Get Open Work Orders</label>
        <locationX>1106</locationX>
        <locationY>644</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Open_Work_Orders_Exist</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>CaseId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Status</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>SC</stringValue>
            </value>
        </filters>
        <filters>
            <field>Status</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>SE</stringValue>
            </value>
        </filters>
        <filters>
            <field>Status</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>SP</stringValue>
            </value>
        </filters>
        <filters>
            <field>HRCFSL_Work_Type_Name__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>SNW</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>WorkOrder</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Work_Order_related_to_CQ</name>
        <label>Get Work Order related to CQ</label>
        <locationX>745</locationX>
        <locationY>323</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Closing_Case</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Complain_Qualification_Records.HRCSVC_Work_Order__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>HRCFSL_Work_Type_Name__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>SNW</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>WorkOrder</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <start>
        <locationX>50</locationX>
        <locationY>21</locationY>
        <connector>
            <targetReference>Canceled_Case</targetReference>
        </connector>
        <object>Case</object>
        <recordTriggerType>Update</recordTriggerType>
        <triggerType>RecordBeforeSave</triggerType>
    </start>
    <status>Active</status>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
