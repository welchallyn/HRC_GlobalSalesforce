<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>49.0</apiVersion>
    <assignments>
        <name>Assign_Default_WO_Duration</name>
        <label>Assign Default WO Duration</label>
        <locationX>623</locationX>
        <locationY>196</locationY>
        <assignmentItems>
            <assignToReference>WODuration</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Duration</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Identify_Service_Resource_Skills</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Work_Order_Duration</name>
        <label>Assign Work Order Duration</label>
        <locationX>224</locationX>
        <locationY>189</locationY>
        <assignmentItems>
            <assignToReference>WODuration</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>WORecord.DurationInMinutes</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Identify_Service_Resource_Skills</targetReference>
        </connector>
    </assignments>
    <choices>
        <name>Cancel</name>
        <choiceText>Exit</choiceText>
        <dataType>String</dataType>
        <value>
            <elementReference>WORecord.Id</elementReference>
        </value>
    </choices>
    <choices>
        <name>Finish</name>
        <choiceText>Assign this Work Order to myself</choiceText>
        <dataType>String</dataType>
        <value>
            <elementReference>Please_select_one_of_the_options_below</elementReference>
        </value>
    </choices>
    <decisions>
        <name>Assign_Work_order_with_no_skills</name>
        <label>Assign Work order with no skills</label>
        <locationX>731</locationX>
        <locationY>302</locationY>
        <defaultConnectorLabel>default</defaultConnectorLabel>
        <rules>
            <name>Assign_WO_to_Service_resource</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Finish</leftValueReference>
                <operator>WasSelected</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_WO_status</targetReference>
            </connector>
            <label>Assign WO to Service resource</label>
        </rules>
        <rules>
            <name>Cancel_button</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Cancel</leftValueReference>
                <operator>WasSelected</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <label>Cancel button</label>
        </rules>
    </decisions>
    <decisions>
        <name>check_if_the_Service_Resource_has_skills</name>
        <label>check if the Service Resource has skills</label>
        <locationX>385</locationX>
        <locationY>493</locationY>
        <defaultConnector>
            <targetReference>Skills_non_availability_Screen</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Skills_available</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>ResourceHasSkill</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_WO_status</targetReference>
            </connector>
            <label>Skills available</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Resource</name>
        <label>Check Resource</label>
        <locationX>1230</locationX>
        <locationY>768</locationY>
        <defaultConnector>
            <targetReference>UpdatingSA</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Check_If_empty</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>AssignedResRecord</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>SAUpdate</targetReference>
            </connector>
            <label>Check If empty</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Service_Appointment</name>
        <label>Check Service Appointment</label>
        <locationX>1086</locationX>
        <locationY>359</locationY>
        <defaultConnector>
            <targetReference>Check_Resource</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>SA_Null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SARecord</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_SA</targetReference>
            </connector>
            <label>SA Null</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Service_Resource</name>
        <label>Check Service Resource</label>
        <locationX>1751</locationX>
        <locationY>765</locationY>
        <defaultConnector>
            <targetReference>Update_Assigned_Resource</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>If_SR_null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SRRecord.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>NotActiveSA</targetReference>
            </connector>
            <label>If SR null</label>
        </rules>
        <rules>
            <name>If_SR_not_active</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SRRecord.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>SRRecord.IsActive</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>NotActiveSA</targetReference>
            </connector>
            <label>If SR not active</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_whether_SA_is_in_Progress</name>
        <label>Check whether SA is in Progress</label>
        <locationX>951</locationX>
        <locationY>557</locationY>
        <defaultConnector>
            <targetReference>Enter_Start_Time</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>SA have Different Status</defaultConnectorLabel>
        <rules>
            <name>SA_in_progress</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SARecord</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>SARecord.StatusCategory</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>InProgress</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>CannotAssignInProgressSA</targetReference>
            </connector>
            <label>SA in progress</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_WO_status</name>
        <label>Check WO status</label>
        <locationX>381</locationX>
        <locationY>636</locationY>
        <defaultConnector>
            <targetReference>Get_SA_Records</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Status_Check</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>WORecord.StatusCategory</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Completed</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>WORecord.StatusCategory</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Canceled</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>No_Assigned</targetReference>
            </connector>
            <label>Status Check</label>
        </rules>
        <rules>
            <name>Is_Kit_Child</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>WORecord.HRCFSL_Is_Kit_Child__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>WORecord.ParentWorkOrderId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Orphaned_kit_child</targetReference>
            </connector>
            <label>Is Kit Child</label>
        </rules>
    </decisions>
    <decisions>
        <name>CheckServiceRes</name>
        <label>CheckServiceRes</label>
        <locationX>1720</locationX>
        <locationY>401</locationY>
        <defaultConnector>
            <targetReference>CreateAR</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>If_Null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SRRecord.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>NotActiveSA</targetReference>
            </connector>
            <label>If Null</label>
        </rules>
        <rules>
            <name>if_not_active</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SRRecord.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>SRRecord.IsActive</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>NotActiveSA</targetReference>
            </connector>
            <label>if not active</label>
        </rules>
    </decisions>
    <decisions>
        <name>HRCFSL_Check_Resource</name>
        <label>Check Resource</label>
        <locationX>1435</locationX>
        <locationY>197</locationY>
        <defaultConnector>
            <targetReference>Create_Assigned_Recource</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Resource_Empty</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SRRecord</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>NullSA</targetReference>
            </connector>
            <label>Resource  Empty</label>
        </rules>
        <rules>
            <name>IF_Sr_Not_null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SRRecord</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>SRRecord.IsActive</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>NotActiveSA</targetReference>
            </connector>
            <label>IF Sr Not null</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Work_Order_having_Duration</name>
        <label>Is Work Order having Duration</label>
        <locationX>378</locationX>
        <locationY>188</locationY>
        <defaultConnector>
            <targetReference>Get_Metadata</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Duration</defaultConnectorLabel>
        <rules>
            <name>Has_Duration</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>WORecord.DurationInMinutes</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Work_Order_Duration</targetReference>
            </connector>
            <label>Has Duration</label>
        </rules>
    </decisions>
    <decisions>
        <description>Check if IsKitChild = True but missing a Parent Work Order</description>
        <name>Orphaned_kit_child</name>
        <label>Orphaned kit child?</label>
        <locationX>234</locationX>
        <locationY>699</locationY>
        <defaultConnector>
            <targetReference>Get_Parent_WO</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Orphaned_Kit</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>WORecord.ParentWorkOrderId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Orphaned_child_error</targetReference>
            </connector>
            <label>Orphaned Kit</label>
        </rules>
    </decisions>
    <decisions>
        <name>Outcome_Ok</name>
        <label>Outcome Ok</label>
        <locationX>734</locationX>
        <locationY>51</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Outcome_Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Outcome</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Ok</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Is_Work_Order_having_Duration</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <formulas>
        <name>CurrentUser</name>
        <dataType>String</dataType>
        <expression>{!$User.Id}</expression>
    </formulas>
    <formulas>
        <name>Duration</name>
        <dataType>Number</dataType>
        <expression>VALUE({!Get_Metadata.HRCFSL_Component_Detail__c})</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>EndTime</name>
        <dataType>DateTime</dataType>
        <expression>If(NOT(ISBLANK({!WORecord.DurationInMinutes})) &amp;&amp; {!WORecord.DurationInMinutes}!=0 ,{!currentTime}+({!WORecord.DurationInMinutes}/(24*60)),{!currentTime}+20/(24*60))</expression>
    </formulas>
    <formulas>
        <name>ScheduledEndForNewSA</name>
        <dataType>DateTime</dataType>
        <expression>{!Choose_your_start_time}+({!WODuration}/(1440))</expression>
    </formulas>
    <interviewLabel>HRCFSL_Work Order Self Assignment {!$Flow.CurrentDateTime}</interviewLabel>
    <label>HRCFSL_Work Order Self Assignment</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>Create_Assigned_Recource</name>
        <label>Create Assigned Recource</label>
        <locationX>1620</locationX>
        <locationY>87</locationY>
        <connector>
            <targetReference>Getting_New_SA</targetReference>
        </connector>
        <inputAssignments>
            <field>ServiceAppointmentId</field>
            <value>
                <elementReference>NewSA.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ServiceResourceId</field>
            <value>
                <elementReference>SRRecord.Id</elementReference>
            </value>
        </inputAssignments>
        <object>AssignedResource</object>
    </recordCreates>
    <recordCreates>
        <name>Create_SA</name>
        <label>Create SA</label>
        <locationX>926</locationX>
        <locationY>60</locationY>
        <assignRecordIdToReference>NewSA.Id</assignRecordIdToReference>
        <connector>
            <targetReference>Update_New_SA</targetReference>
        </connector>
        <inputAssignments>
            <field>DueDate</field>
            <value>
                <elementReference>WORecord.EndDate</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>EarliestStartTime</field>
            <value>
                <elementReference>WORecord.StartDate</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>HRCFSL_Self_Scheduled__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ParentRecordId</field>
            <value>
                <elementReference>WORecord.Id</elementReference>
            </value>
        </inputAssignments>
        <object>ServiceAppointment</object>
    </recordCreates>
    <recordCreates>
        <name>CreateAR</name>
        <label>CreateAR</label>
        <locationX>1937</locationX>
        <locationY>619</locationY>
        <connector>
            <targetReference>UpdateSA_Status</targetReference>
        </connector>
        <inputAssignments>
            <field>ServiceAppointmentId</field>
            <value>
                <elementReference>SARecord.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ServiceResourceId</field>
            <value>
                <elementReference>SRRecord.Id</elementReference>
            </value>
        </inputAssignments>
        <object>AssignedResource</object>
    </recordCreates>
    <recordLookups>
        <name>CreateSR</name>
        <label>CreateSR</label>
        <locationX>1628</locationX>
        <locationY>598</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>CheckServiceRes</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>IsActive</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>RelatedRecordId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CurrentUser</elementReference>
            </value>
        </filters>
        <filters>
            <field>ResourceType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>T</stringValue>
            </value>
        </filters>
        <object>ServiceResource</object>
        <outputReference>SRRecord</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>IsActive</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_Metadata</name>
        <label>Get Metadata</label>
        <locationX>526</locationX>
        <locationY>189</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Default_WO_Duration</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>HRCFSL_WO_Duration</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>HRCFSL_Organization_Settings__mdt</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Parent_WO</name>
        <label>Get Parent WO</label>
        <locationX>389</locationX>
        <locationY>803</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Kit_Child_Error</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>WORecord.ParentWorkOrderId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>WorkOrder</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>WorkOrderNumber</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>getting SA records</description>
        <name>Get_SA_Records</name>
        <label>Get SA Records</label>
        <locationX>819</locationX>
        <locationY>728</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>HRCFSL_GetAssignedRecource</targetReference>
        </connector>
        <filterLogic>1 AND (2 OR 3 OR 4 OR 5)</filterLogic>
        <filters>
            <field>ParentRecordId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <filters>
            <field>StatusCategory</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>None</stringValue>
            </value>
        </filters>
        <filters>
            <field>StatusCategory</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Scheduled</stringValue>
            </value>
        </filters>
        <filters>
            <field>StatusCategory</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Dispatched</stringValue>
            </value>
        </filters>
        <filters>
            <field>StatusCategory</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>InProgress</stringValue>
            </value>
        </filters>
        <object>ServiceAppointment</object>
        <outputReference>SARecord</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>StatusCategory</queriedFields>
        <queriedFields>Status</queriedFields>
        <queriedFields>AppointmentNumber</queriedFields>
        <queriedFields>HRCFSL_Self_Scheduled__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Getting_New_SA</name>
        <label>Getting New SA</label>
        <locationX>1757</locationX>
        <locationY>90</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>SAStatusUpdate</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>NewSA.Id</elementReference>
            </value>
        </filters>
        <object>ServiceAppointment</object>
        <outputReference>NewSA</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>StatusCategory</queriedFields>
        <queriedFields>AppointmentNumber</queriedFields>
        <queriedFields>HRCFSL_Self_Scheduled__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Getting_SR</name>
        <label>Getting SR</label>
        <locationX>1579</locationX>
        <locationY>861</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_Service_Resource</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>IsActive</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>RelatedRecordId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CurrentUser</elementReference>
            </value>
        </filters>
        <filters>
            <field>ResourceType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>T</stringValue>
            </value>
        </filters>
        <object>ServiceResource</object>
        <outputReference>SRRecord</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>IsActive</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Getting_Work_Order_Record</name>
        <label>Getting Work Order Record</label>
        <locationX>390</locationX>
        <locationY>50</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Work_Order_Validation</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <object>WorkOrder</object>
        <outputReference>WORecord</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>StartDate</queriedFields>
        <queriedFields>EndDate</queriedFields>
        <queriedFields>StatusCategory</queriedFields>
        <queriedFields>WorkOrderNumber</queriedFields>
        <queriedFields>DurationInMinutes</queriedFields>
        <queriedFields>HRCFSL_Is_Kit_Child__c</queriedFields>
        <queriedFields>ParentWorkOrderId</queriedFields>
        <queriedFields>HRCFSL_Doc_Type__c</queriedFields>
        <queriedFields>HRCFSL_Activity_Type__c</queriedFields>
        <queriedFields>AssetId</queriedFields>
        <queriedFields>HRCFSL_IBOAR_ID__c</queriedFields>
        <queriedFields>HRCFSL_Asset_Status__c</queriedFields>
        <queriedFields>LocationId</queriedFields>
        <queriedFields>HRCFSL_Work_Type_Name__c</queriedFields>
        <queriedFields>HRCFSL_SWORD_ID__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>HRCFSL_GetAssignedRecource</name>
        <label>GetAssignedRecource</label>
        <locationX>962</locationX>
        <locationY>728</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_whether_SA_is_in_Progress</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ServiceAppointmentId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>SARecord.Id</elementReference>
            </value>
        </filters>
        <object>AssignedResource</object>
        <outputReference>AssignedResRecord</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>ServiceResourceId</queriedFields>
        <queriedFields>ServiceAppointmentId</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Service_Resource</name>
        <label>Service Resource</label>
        <locationX>1296</locationX>
        <locationY>61</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>HRCFSL_Check_Resource</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>IsActive</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>RelatedRecordId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CurrentUser</elementReference>
            </value>
        </filters>
        <filters>
            <field>ResourceType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>T</stringValue>
            </value>
        </filters>
        <object>ServiceResource</object>
        <outputReference>SRRecord</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>IsActive</queriedFields>
    </recordLookups>
    <recordUpdates>
        <name>SAStatusUpdate</name>
        <label>SAStatusUpdate</label>
        <locationX>1886</locationX>
        <locationY>88</locationY>
        <connector>
            <targetReference>NewSAAssignment</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>NewSA.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>HRCFSL_Self_Scheduled__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Dispatched</stringValue>
            </value>
        </inputAssignments>
        <object>ServiceAppointment</object>
    </recordUpdates>
    <recordUpdates>
        <name>SAUpdate</name>
        <label>SAUpdate</label>
        <locationX>1487</locationX>
        <locationY>576</locationY>
        <connector>
            <targetReference>CreateSR</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>SARecord.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>HRCFSL_Self_Scheduled__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SchedEndTime</field>
            <value>
                <elementReference>ScheduledEndForNewSA</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SchedStartTime</field>
            <value>
                <elementReference>Choose_your_start_time</elementReference>
            </value>
        </inputAssignments>
        <object>ServiceAppointment</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Assigned_Resource</name>
        <label>Update Assigned Resource</label>
        <locationX>2115</locationX>
        <locationY>997</locationY>
        <connector>
            <targetReference>ExistingSA</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>AssignedResRecord.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>ServiceResourceId</field>
            <value>
                <elementReference>SRRecord.Id</elementReference>
            </value>
        </inputAssignments>
        <object>AssignedResource</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_New_SA</name>
        <label>Update New SA</label>
        <locationX>1111</locationX>
        <locationY>58</locationY>
        <connector>
            <targetReference>Service_Resource</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>NewSA.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>SchedEndTime</field>
            <value>
                <elementReference>ScheduledEndForNewSA</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SchedStartTime</field>
            <value>
                <elementReference>Choose_your_start_time</elementReference>
            </value>
        </inputAssignments>
        <object>ServiceAppointment</object>
    </recordUpdates>
    <recordUpdates>
        <name>UpdateSA_Status</name>
        <label>UpdateSA Status</label>
        <locationX>2100</locationX>
        <locationY>597</locationY>
        <connector>
            <targetReference>ExistingSA</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>SARecord.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>HRCFSL_Self_Scheduled__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Dispatched</stringValue>
            </value>
        </inputAssignments>
        <object>ServiceAppointment</object>
    </recordUpdates>
    <recordUpdates>
        <name>UpdatingSA</name>
        <label>UpdatingSA</label>
        <locationX>1431</locationX>
        <locationY>924</locationY>
        <connector>
            <targetReference>Getting_SR</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>SARecord.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>HRCFSL_Self_Scheduled__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SchedEndTime</field>
            <value>
                <elementReference>ScheduledEndForNewSA</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SchedStartTime</field>
            <value>
                <elementReference>Choose_your_start_time</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Dispatched</stringValue>
            </value>
        </inputAssignments>
        <object>ServiceAppointment</object>
    </recordUpdates>
    <screens>
        <name>CannotAssignInProgressSA</name>
        <label>CannotAssignInProgressSA</label>
        <locationX>799</locationX>
        <locationY>489</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>InProgressSA</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); font-size: 11px; font-family: Arial, sans-serif; color: rgb(51, 51, 51);&quot;&gt;It&apos;s not allowed to assign a Work Order with a Service Appointment that&apos;s already In Progress.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Enter_Start_Time</name>
        <label>Enter Start Time</label>
        <locationX>956</locationX>
        <locationY>305</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Check_Service_Appointment</targetReference>
        </connector>
        <fields>
            <name>Choose_your_start_time</name>
            <dataType>DateTime</dataType>
            <defaultValue>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </defaultValue>
            <fieldText>Choose your start time</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>ExistingSA</name>
        <label>ExistingSA</label>
        <locationX>2432</locationX>
        <locationY>694</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>ExistingSAAssign</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Segoe UI&amp;quot;, &amp;quot;Segoe UI Web&amp;quot;, Arial, Verdana, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);&quot;&gt;The existing service appointment {!SARecord.AppointmentNumber} is now assigned to you for Work Order: WO-{!WORecord.WorkOrderNumber}.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Kit_Child_Error</name>
        <label>Kit Child Error</label>
        <locationX>680</locationX>
        <locationY>803</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>Cannot_Self_Assign_Kit_Child</name>
            <fieldText>&lt;p&gt;You cannot self-assign the child of a kit. Please navigate to the main work order {!Get_Parent_WO.WorkOrderNumber} and self-assign it.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>NewSAAssignment</name>
        <label>NewSA</label>
        <locationX>2089</locationX>
        <locationY>84</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>NewSAAssign</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Segoe UI&amp;quot;, &amp;quot;Segoe UI Web&amp;quot;, Arial, Verdana, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);&quot;&gt; A new service appointment {!NewSA.AppointmentNumber} was created and assigned to you for Work Order: WO-{!WORecord.WorkOrderNumber}&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>No_Assigned</name>
        <label>No Assigned</label>
        <locationX>689</locationX>
        <locationY>567</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>NotAssignedWo</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); font-size: 12px; font-family: &amp;quot;Segoe UI&amp;quot;, &amp;quot;Segoe UI Web&amp;quot;, Arial, Verdana, sans-serif; color: rgb(51, 51, 51);&quot;&gt;You cannot assign a closed Work Order&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>NotActiveSA</name>
        <label>NotActiveSA</label>
        <locationX>1484</locationX>
        <locationY>329</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>SANotActive</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); font-size: 11px; color: rgb(62, 62, 60);&quot;&gt;You are currently not setup as an Active Service Resource of type Technician, please contact your Administrator. The Work Order will not be assigned.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>NullSA</name>
        <label>NullSA</label>
        <locationX>1427</locationX>
        <locationY>39</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>Resource_Not_Found</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;You are currently not setup as an Active Service Resource of type Technician, please contact your Administrator. The Work Order will not be assigned.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Orphaned_child_error</name>
        <label>Orphaned child error</label>
        <locationX>243</locationX>
        <locationY>861</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>Cannot_Self_Assign_Orphaned_Kit</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(62, 62, 60);&quot;&gt;You cannot self-assign the child of a kit. Please navigate to the main work order  and self-assign it.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Skills_non_availability_Screen</name>
        <label>Skills non availability Screen</label>
        <locationX>616</locationX>
        <locationY>427</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Assign_Work_order_with_no_skills</targetReference>
        </connector>
        <fields>
            <name>Skills_nonavailability_screen</name>
            <fieldText>&lt;p&gt;You do not have the required skills to complete this Work Order. Press Assign button to assign the Work Order to yourself anyways, otherwise click Exit&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Please_select_one_of_the_options_below</name>
            <choiceReferences>Finish</choiceReferences>
            <choiceReferences>Cancel</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Please select one of the options below</fieldText>
            <fieldType>RadioButtons</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <start>
        <locationX>50</locationX>
        <locationY>50</locationY>
        <connector>
            <targetReference>Getting_Work_Order_Record</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <subflows>
        <name>Identify_Service_Resource_Skills</name>
        <label>Identify Service Resource Skills</label>
        <locationX>392</locationX>
        <locationY>360</locationY>
        <connector>
            <targetReference>check_if_the_Service_Resource_has_skills</targetReference>
        </connector>
        <flowName>HRCFSL_Identify_Service_Resource_Required_Skills_subflow</flowName>
        <inputAssignments>
            <name>userId</name>
            <value>
                <elementReference>CurrentUser</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>WorkOrderId</name>
            <value>
                <elementReference>WORecord.Id</elementReference>
            </value>
        </inputAssignments>
        <outputAssignments>
            <assignToReference>ResourceHasSkill</assignToReference>
            <name>hasSkills</name>
        </outputAssignments>
    </subflows>
    <subflows>
        <name>Work_Order_Validation</name>
        <label>Work Order Validation</label>
        <locationX>611</locationX>
        <locationY>42</locationY>
        <connector>
            <targetReference>Outcome_Ok</targetReference>
        </connector>
        <flowName>HRCFSL_Work_Order_Validation_SF</flowName>
        <inputAssignments>
            <name>varRecWorkOrder</name>
            <value>
                <elementReference>WORecord</elementReference>
            </value>
        </inputAssignments>
        <outputAssignments>
            <assignToReference>Outcome</assignToReference>
            <name>varOutcome</name>
        </outputAssignments>
    </subflows>
    <variables>
        <name>AssignedResRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>AssignedResource</objectType>
    </variables>
    <variables>
        <name>currentTime</name>
        <dataType>DateTime</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <elementReference>$Flow.CurrentDateTime</elementReference>
        </value>
    </variables>
    <variables>
        <name>hasSkills</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>NewSA</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceAppointment</objectType>
    </variables>
    <variables>
        <name>Outcome</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ResourceHasSkill</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>SARecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceAppointment</objectType>
    </variables>
    <variables>
        <name>ServiceResourceID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ServiceResourceSkills</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceResourceSkill</objectType>
    </variables>
    <variables>
        <name>SkillRequirement_LoopVar</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SkillRequirement</objectType>
    </variables>
    <variables>
        <name>SkillRequirements</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SkillRequirement</objectType>
    </variables>
    <variables>
        <name>SRRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceResource</objectType>
    </variables>
    <variables>
        <name>UserID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>WODuration</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>WORecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>WorkOrder</objectType>
    </variables>
</Flow>
