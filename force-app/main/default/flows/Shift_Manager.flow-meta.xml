<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <actionCalls>
        <name>End_Date_Time</name>
        <label>End Date/Time</label>
        <locationX>2734</locationX>
        <locationY>480</locationY>
        <actionName>CalcDateTimeZone</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Adjust_End_Date_Time</targetReference>
        </connector>
        <inputParameters>
            <name>dateInput</name>
            <value>
                <elementReference>StartDayCalculation</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>hourInput</name>
            <value>
                <elementReference>TemplateSchedule.EndHour__c</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>minutesInput</name>
            <value>
                <elementReference>TemplateSchedule.EndMinutes__c</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>timeZoneInput</name>
            <value>
                <elementReference>TimeZone</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>ConvertedEndDateTime</assignToReference>
            <name>dateTimeOutput</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>End_Date_Time_0</name>
        <label>End Date/Time</label>
        <locationX>2735</locationX>
        <locationY>611</locationY>
        <actionName>CalcDateTimeZone</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Adjust_End_Date_Time</targetReference>
        </connector>
        <inputParameters>
            <name>dateInput</name>
            <value>
                <elementReference>StartDayCalculation</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>dateTimeInput</name>
            <value>
                <elementReference>ManualEnd</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>timeZoneInput</name>
            <value>
                <elementReference>TimeZone</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>ConvertedEndDateTime</assignToReference>
            <name>dateTimeOutput</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>Start_Date_Time</name>
        <label>Start Date/Time</label>
        <locationX>2623</locationX>
        <locationY>480</locationY>
        <actionName>CalcDateTimeZone</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>End_Date_Time</targetReference>
        </connector>
        <inputParameters>
            <name>dateInput</name>
            <value>
                <elementReference>StartDayCalculation</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>hourInput</name>
            <value>
                <elementReference>TemplateSchedule.StartHour__c</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>minutesInput</name>
            <value>
                <elementReference>TemplateSchedule.StartMinutes__c</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>timeZoneInput</name>
            <value>
                <elementReference>TimeZone</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>ConvertedStartDateTime</assignToReference>
            <name>dateTimeOutput</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>Start_Date_Time_0</name>
        <label>Start Date/Time</label>
        <locationX>2624</locationX>
        <locationY>611</locationY>
        <actionName>CalcDateTimeZone</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>End_Date_Time_0</targetReference>
        </connector>
        <inputParameters>
            <name>dateInput</name>
            <value>
                <elementReference>StartDayCalculation</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>dateTimeInput</name>
            <value>
                <elementReference>ManualStart</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>timeZoneInput</name>
            <value>
                <elementReference>TimeZone</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>ConvertedStartDateTime</assignToReference>
            <name>dateTimeOutput</name>
        </outputParameters>
    </actionCalls>
    <apiVersion>49.0</apiVersion>
    <assignments>
        <name>Add_Generated_Template_Schedule_Individual</name>
        <label>Add Generated Template Schedule</label>
        <locationX>1649</locationX>
        <locationY>1182</locationY>
        <assignmentItems>
            <assignToReference>SplitTemplateSchedules</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>GeneratedTemplateSchedule</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SelectedDays</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>RemoveAddedDay</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>More_Days</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_Generated_Template_Schedule_Manual</name>
        <label>Add Generated Template Schedule</label>
        <locationX>1495</locationX>
        <locationY>728</locationY>
        <assignmentItems>
            <assignToReference>SplitTemplateSchedules</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>GeneratedTemplateSchedule</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Manual_or_Templated_0_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_Shift</name>
        <label>Add Shift</label>
        <locationX>3123</locationX>
        <locationY>547</locationY>
        <assignmentItems>
            <assignToReference>Shifts</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Shift</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Reduce_Counter</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Adjust_End_Date_Time</name>
        <label>Adjust End Date/Time</label>
        <locationX>2866</locationX>
        <locationY>547</locationY>
        <assignmentItems>
            <assignToReference>AdjustedConvertedEndDateTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>EndDateTimeCalculation</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_Shift_Details</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Counter</name>
        <label>Assign Counter</label>
        <locationX>2347</locationX>
        <locationY>545</locationY>
        <assignmentItems>
            <assignToReference>Counter</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CounterCalculation</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Manual_or_Templated_0_0_0_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Current_Days</name>
        <label>Assign Current Days</label>
        <locationX>2072</locationX>
        <locationY>626</locationY>
        <assignmentItems>
            <assignToReference>CurrentDays</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>TemplateSchedule.Days__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Filter</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Dates_Manual</name>
        <label>Assign Dates</label>
        <locationX>750</locationX>
        <locationY>999</locationY>
        <assignmentItems>
            <assignToReference>PeriodStartDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ManualStart</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PeriodEndDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ManualEnd</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Day_Types</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Dates_Templated</name>
        <label>Assign Dates</label>
        <locationX>917</locationX>
        <locationY>547</locationY>
        <assignmentItems>
            <assignToReference>PeriodStartDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Start_Date</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PeriodEndDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>End_Date</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Template</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Error</name>
        <label>Assign Error</label>
        <locationX>312</locationX>
        <locationY>693</locationY>
        <assignmentItems>
            <assignToReference>ConsecutiveDaysBoolean</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Shift</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Error_0</name>
        <label>Assign Error</label>
        <locationX>551</locationX>
        <locationY>413</locationY>
        <assignmentItems>
            <assignToReference>TemplateSchedulesNullBoolean</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Shift</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Original_Template_Schedule_Individual</name>
        <label>Assign Original Template Schedule</label>
        <locationX>1160</locationX>
        <locationY>1182</locationY>
        <assignmentItems>
            <assignToReference>GeneratedTemplateSchedule</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OriginalTemplateSchedule</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Manual_or_Templated_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Original_Template_Schedule_Individual_0</name>
        <label>Assign Original Template Schedule</label>
        <locationX>1258</locationX>
        <locationY>638</locationY>
        <assignmentItems>
            <assignToReference>GeneratedTemplateSchedule</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OriginalTemplateSchedule</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Generate_Split_Template_Schedule_Multi_Templated</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Shift_Details</name>
        <label>Assign Shift Details</label>
        <locationX>2987</locationX>
        <locationY>547</locationY>
        <assignmentItems>
            <assignToReference>Shift.StartTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ShiftStartCalculation</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Shift.EndTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ShiftEndCalculation</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Shift.ServiceResourceId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SelectedResourceId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Shift.Status</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Status</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Shift.TimeSlotType</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Type</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Shift</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Clear_Shifts</name>
        <label>Clear Shifts</label>
        <locationX>1758</locationX>
        <locationY>357</locationY>
        <assignmentItems>
            <assignToReference>Shifts</assignToReference>
            <operator>RemoveAll</operator>
            <value>
                <elementReference>Shifts</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SplitTemplateSchedules</assignToReference>
            <operator>RemoveAll</operator>
            <value>
                <elementReference>SplitTemplateSchedules</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Continue</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>General_Assignments</name>
        <label>General Assignments</label>
        <locationX>631</locationX>
        <locationY>546</locationY>
        <assignmentItems>
            <assignToReference>TimeZone</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Primary_Territory.ServiceTerritory.OperatingHours.TimeZone</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SelectedScheduleTypeChoice</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SchedulingTypeSelection</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SelectedDays</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ManualDays</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Manual_or_Templated</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Generate_Split_Template_Schedule_Individal_Templated</name>
        <label>Generate Split Template Schedule</label>
        <locationX>1461</locationX>
        <locationY>1103</locationY>
        <assignmentItems>
            <assignToReference>GeneratedTemplateSchedule.Days__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>FindNextDay</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GeneratedTemplateSchedule.Multi_Day__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>MultiDay</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Generated_Template_Schedule_Individual</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Generate_Split_Template_Schedule_Individual_Manual</name>
        <label>Generate Split Template Schedule</label>
        <locationX>1461</locationX>
        <locationY>1241</locationY>
        <assignmentItems>
            <assignToReference>GeneratedTemplateSchedule.Days__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>FindNextDay</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GeneratedTemplateSchedule.Multi_Day__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>MultiDay</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Generated_Template_Schedule_Individual</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Generate_Split_Template_Schedule_Multi_Manual</name>
        <label>Generate Split Template Schedule</label>
        <locationX>1495</locationX>
        <locationY>888</locationY>
        <assignmentItems>
            <assignToReference>GeneratedTemplateSchedule.Days__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ManualDays</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GeneratedTemplateSchedule.Multi_Day__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>MultiDay</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Generated_Template_Schedule_Manual</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Generate_Split_Template_Schedule_Multi_Templated</name>
        <label>Generate Split Template Schedule</label>
        <locationX>1371</locationX>
        <locationY>728</locationY>
        <assignmentItems>
            <assignToReference>GeneratedTemplateSchedule.Days__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ManualDays</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GeneratedTemplateSchedule.Multi_Day__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>MultiDay</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Generated_Template_Schedule_Manual</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Reduce_Counter</name>
        <label>Reduce Counter</label>
        <locationX>3123</locationX>
        <locationY>1138</locationY>
        <assignmentItems>
            <assignToReference>Counter</assignToReference>
            <operator>Subtract</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Counter_Size</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Unassign_Error</name>
        <label>Unassign Error</label>
        <locationX>506</locationX>
        <locationY>693</locationY>
        <assignmentItems>
            <assignToReference>ConsecutiveDaysBoolean</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Primary_Territory</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Unassign_Error_0</name>
        <label>Unassign Error</label>
        <locationX>1151</locationX>
        <locationY>413</locationY>
        <assignmentItems>
            <assignToReference>TemplateSchedulesNullBoolean</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_Pre_Defined_Template_Schedules</targetReference>
        </connector>
    </assignments>
    <choices>
        <name>DefaultScheduleTypeChoice</name>
        <choiceText>{!SelectedScheduleTypeChoice}</choiceText>
        <dataType>String</dataType>
        <value>
            <elementReference>SelectedScheduleTypeChoice</elementReference>
        </value>
    </choices>
    <choices>
        <name>Manual</name>
        <choiceText>Manual</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Manual</stringValue>
        </value>
    </choices>
    <choices>
        <name>Templated</name>
        <choiceText>Templated</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Templated</stringValue>
        </value>
    </choices>
    <decisions>
        <name>Continue</name>
        <label>Continue</label>
        <locationX>383</locationX>
        <locationY>359</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Add_more_shifts</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Shift</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Counter_Size</name>
        <label>Counter Size</label>
        <locationX>2445</locationX>
        <locationY>1133</locationY>
        <defaultConnector>
            <targetReference>Template_Schedules_Loop</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Finish</defaultConnectorLabel>
        <rules>
            <name>Counter_Greater_Than_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Counter</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Shift_Details</targetReference>
            </connector>
            <label>Counter &gt; 0</label>
        </rules>
    </decisions>
    <decisions>
        <name>Day_Types</name>
        <label>Day Types</label>
        <locationX>1152</locationX>
        <locationY>1001</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Multi</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>MultiDay</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Manual_or_Templated_0_0_0</targetReference>
            </connector>
            <label>Multi</label>
        </rules>
        <rules>
            <name>Individual</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>MultiDay</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Original_Template_Schedule_Individual</targetReference>
            </connector>
            <label>Individual</label>
        </rules>
    </decisions>
    <decisions>
        <name>Filter</name>
        <label>Filter</label>
        <locationX>2195</locationX>
        <locationY>547</locationY>
        <defaultConnector>
            <targetReference>Template_Schedules_Loop</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Yes</defaultConnectorLabel>
        <rules>
            <name>No</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>FutureFilter</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Counter</targetReference>
            </connector>
            <label>No</label>
        </rules>
    </decisions>
    <decisions>
        <name>Manual_or_Templated</name>
        <label>Manual or Templated</label>
        <locationX>741</locationX>
        <locationY>548</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ManualDecision</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SchedulingTypeSelection</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Manual</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Dates_Manual</targetReference>
            </connector>
            <label>Manual</label>
        </rules>
        <rules>
            <name>TemplatedDecision</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SchedulingTypeSelection</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Templated</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Dates_Templated</targetReference>
            </connector>
            <label>Templated</label>
        </rules>
    </decisions>
    <decisions>
        <name>Manual_or_Templated_0</name>
        <label>Manual or Templated</label>
        <locationX>1265</locationX>
        <locationY>1184</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ManualDecision_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SchedulingTypeSelection</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Manual</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Generate_Split_Template_Schedule_Individual_Manual</targetReference>
            </connector>
            <label>Manual</label>
        </rules>
        <rules>
            <name>TemplatedDecision_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SchedulingTypeSelection</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Templated</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Generate_Split_Template_Schedule_Individal_Templated</targetReference>
            </connector>
            <label>Templated</label>
        </rules>
    </decisions>
    <decisions>
        <name>Manual_or_Templated_0_0</name>
        <label>Manual or Templated</label>
        <locationX>1643</locationX>
        <locationY>624</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ManualDecision_0_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SchedulingTypeSelection</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Manual</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Template_Schedules_Loop</targetReference>
            </connector>
            <label>Manual</label>
        </rules>
        <rules>
            <name>TemplatedDecision_0_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SchedulingTypeSelection</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Templated</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_Through_Pre_Defined_Template_Schedules</targetReference>
            </connector>
            <label>Templated</label>
        </rules>
    </decisions>
    <decisions>
        <name>Manual_or_Templated_0_0_0</name>
        <label>Manual or Templated</label>
        <locationX>1249</locationX>
        <locationY>892</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ManualDecision_0_0_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SchedulingTypeSelection</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Manual</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Generate_Split_Template_Schedule_Multi_Manual</targetReference>
            </connector>
            <label>Manual</label>
        </rules>
        <rules>
            <name>TemplatedDecision_0_0_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SchedulingTypeSelection</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Templated</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Original_Template_Schedule_Individual_0</targetReference>
            </connector>
            <label>Templated</label>
        </rules>
    </decisions>
    <decisions>
        <name>Manual_or_Templated_0_0_0_0</name>
        <label>Manual or Templated</label>
        <locationX>2467</locationX>
        <locationY>547</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ManualDecision_0_0_0_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SchedulingTypeSelection</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Manual</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Start_Date_Time_0</targetReference>
            </connector>
            <label>Manual</label>
        </rules>
        <rules>
            <name>TemplatedDecision_0_0_0_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SchedulingTypeSelection</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Templated</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Start_Date_Time</targetReference>
            </connector>
            <label>Templated</label>
        </rules>
    </decisions>
    <decisions>
        <name>More_Days</name>
        <label>More Days</label>
        <locationX>1641</locationX>
        <locationY>1001</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_More_Days</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SelectedDays</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Day_Types</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
        <rules>
            <name>No_More_Days</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SelectedDays</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Manual_or_Templated_0_0</targetReference>
            </connector>
            <label>No</label>
        </rules>
    </decisions>
    <decisions>
        <name>Multi_Day_Consecutive</name>
        <label>Multi-Day Consecutive</label>
        <locationX>391</locationX>
        <locationY>827</locationY>
        <defaultConnector>
            <targetReference>Unassign_Error</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_Multi_Day_Consecutive</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>MultiDay</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>ConsecutiveDaysValidation</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Error</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Template_Schedules_Found</name>
        <label>Template Schedules Found</label>
        <locationX>1022</locationX>
        <locationY>416</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_Template_Schedules_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Template</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Unassign_Error_0</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
        <rules>
            <name>No_Template_Schedules_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Template</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Error_0</targetReference>
            </connector>
            <label>No</label>
        </rules>
    </decisions>
    <dynamicChoiceSets>
        <name>Days</name>
        <dataType>Multipicklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>Days__c</picklistField>
        <picklistObject>Template_Schedule__c</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>JobType</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>TimeSlotType</picklistField>
        <picklistObject>Shift</picklistObject>
        <sortOrder>Desc</sortOrder>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>Status</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>Status</picklistField>
        <picklistObject>Shift</picklistObject>
        <sortOrder>Asc</sortOrder>
    </dynamicChoiceSets>
    <formulas>
        <name>ConsecutiveDaysError</name>
        <dataType>String</dataType>
        <expression>IF({!ConsecutiveDaysBoolean}, &quot;Multi-Day Shifts must be consecutive.&quot;, &quot;&quot;)</expression>
    </formulas>
    <formulas>
        <name>ConsecutiveDaysValidation</name>
        <dataType>Boolean</dataType>
        <expression>SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Monday; Tuesday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Monday; Tuesday; Wednesday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Monday; Tuesday; Wednesday; Thursday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Monday; Tuesday; Wednesday; Thursday; Friday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Monday; Tuesday; Wednesday; Thursday; Friday; Saturday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Monday; Tuesday; Wednesday; Thursday; Friday; Saturday; Sunday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Tuesday; Wednesday; Thursday; Friday; Saturday; Sunday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Tuesday; Wednesday; Thursday; Friday; Saturday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Tuesday; Wednesday; Thursday; Friday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Tuesday; Wednesday; Thursday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Tuesday; Wednesday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Wednesday; Thursday; Friday; Saturday; Sunday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Wednesday; Thursday; Friday; Saturday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Wednesday; Thursday; Friday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Wednesday; Thursday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Thursday; Friday; Saturday; Sunday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Thursday; Friday; Saturday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Thursday; Friday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Friday; Saturday; Sunday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Friday; Saturday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Saturday; Sunday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Monday; Wednesday; Thursday; Friday; Saturday; Sunday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Monday; Thursday; Friday; Saturday; Sunday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Monday; Friday; Saturday; Sunday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Monday; Sunday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Monday; Tuesday; Thursday; Friday; Saturday; Sunday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Monday; Tuesday; Friday; Saturday; Sunday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Monday; Tuesday; Saturday; Sunday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Monday; Tuesday; Sunday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Monday; Tuesday; Wednesday; Friday; Saturday; Sunday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Monday; Tuesday; Wednesday; Saturday; Sunday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Monday; Tuesday; Wednesday; Sunday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Monday; Tuesday; Wednesday; Thursday; Saturday; Sunday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Monday; Tuesday; Wednesday; Thursday; Sunday&quot;, &quot; &quot;, &quot;&quot;) || 
SUBSTITUTE({!ManualDays}, &quot; &quot;, &quot;&quot;) = SUBSTITUTE(&quot;Monday; Tuesday; Wednesday; Thursday; Friday; Sunday&quot;, &quot; &quot;, &quot;&quot;)</expression>
    </formulas>
    <formulas>
        <name>CounterCalculation</name>
        <dataType>Number</dataType>
        <expression>FLOOR((({!PeriodEndDate} - {!PeriodStartDate}) - {!OffsetDetermination}) / 7)</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>CountManualDays</name>
        <dataType>Number</dataType>
        <expression>1</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>DayCalculation</name>
        <dataType>Number</dataType>
        <expression>CASE(IF({!TemplateSchedule.Multi_Day__c}, {!FindMultiDayStart}, {!CurrentDays}), &quot;Monday&quot;, 0, &quot;Tuesday&quot;, 1, &quot;Wednesday&quot;, 2, &quot;Thursday&quot;, 3, &quot;Friday&quot;, 4, &quot;Saturday&quot;, 5, 6)</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>EndDateTimeCalculation</name>
        <dataType>DateTime</dataType>
        <expression>{!ConvertedEndDateTime} + IF({!TemplateSchedule.Multi_Day__c}, {!FindMultiDayCount}, IF({!ConvertedStartDateTime} &gt;= {!ConvertedEndDateTime}, 1, 0))</expression>
    </formulas>
    <formulas>
        <name>EndDayCalculation</name>
        <dataType>Date</dataType>
        <expression>{!ConvertedStartDateTime} + IF({!TemplateSchedule.Multi_Day__c}, {!FindMultiDayCount}, IF({!ConvertedStartDateTime} &gt; {!ConvertedEndDateTime}, 1, 0))</expression>
    </formulas>
    <formulas>
        <name>FindMultiDayCount</name>
        <dataType>Number</dataType>
        <expression>LEN({!CurrentDays}) - LEN(SUBSTITUTE({!CurrentDays}, &quot;;&quot;, &quot;&quot;))</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>FindMultiDayStart</name>
        <dataType>String</dataType>
        <expression>IF(CONTAINS({!CurrentDays}, &quot;Monday&quot;), 
   IF(CONTAINS({!CurrentDays}, &quot;Sunday&quot;), 
      IF(CONTAINS({!CurrentDays}, &quot;Saturday&quot;), 
         IF(CONTAINS({!CurrentDays}, &quot;Friday&quot;), 
            IF(CONTAINS({!CurrentDays}, &quot;Thursday&quot;), 
               IF(CONTAINS({!CurrentDays}, &quot;Wednesday&quot;), 
                  IF(CONTAINS({!CurrentDays}, &quot;Tuesday&quot;), &quot;Tuesday&quot;, &quot;Wednesday&quot;)
               , &quot;Thursday&quot;)
            , &quot;Friday&quot;)
         , &quot;Saturday&quot;)
      , &quot;Sunday&quot;)
   , &quot;Monday&quot;)
, LEFT({!CurrentDays}, FIND(&quot;;&quot;, {!CurrentDays}) - 1))</expression>
    </formulas>
    <formulas>
        <name>FindNextDay</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE(IF(CONTAINS({!SelectedDays}, &quot;;&quot;), LEFT({!SelectedDays}, FIND(&quot;;&quot;, {!SelectedDays}) - 1), {!SelectedDays}), &quot; &quot;, &quot;&quot;)</expression>
    </formulas>
    <formulas>
        <name>FutureFilter</name>
        <dataType>Boolean</dataType>
        <expression>{!Span} &lt; {!OffsetDetermination}</expression>
    </formulas>
    <formulas>
        <name>OffsetDetermination</name>
        <dataType>Number</dataType>
        <expression>IF({!PeriodStartCalculation} &gt; {!DayCalculation}, 7 - ({!PeriodStartCalculation} - {!DayCalculation}), {!DayCalculation} - {!PeriodStartCalculation})</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>PeriodStartCalculation</name>
        <dataType>Number</dataType>
        <expression>MOD({!PeriodStartDate} - DATE(1900, 1, 8 ), 7)</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>RemoveAddedDay</name>
        <dataType>String</dataType>
        <expression>IF(CONTAINS({!SelectedDays}, &quot;;&quot;), RIGHT({!SelectedDays}, LEN({!SelectedDays}) - FIND(&quot;;&quot;, {!SelectedDays})), null)</expression>
    </formulas>
    <formulas>
        <name>ShiftEndCalculation</name>
        <dataType>DateTime</dataType>
        <expression>{!AdjustedConvertedEndDateTime} + (7 * {!Counter})</expression>
    </formulas>
    <formulas>
        <name>ShiftStartCalculation</name>
        <dataType>DateTime</dataType>
        <expression>{!ConvertedStartDateTime} + (7 * {!Counter})</expression>
    </formulas>
    <formulas>
        <name>Span</name>
        <dataType>Number</dataType>
        <expression>{!PeriodEndDate} - {!PeriodStartDate}</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>StartDayCalculation</name>
        <dataType>Date</dataType>
        <expression>{!PeriodStartDate} + {!OffsetDetermination}</expression>
    </formulas>
    <formulas>
        <name>TemplateScheduledNullError</name>
        <dataType>String</dataType>
        <expression>IF({!TemplateSchedulesNullBoolean}, &quot;The Shift Template must have Template Schedules.&quot;, &quot;&quot;)</expression>
    </formulas>
    <interviewLabel>Shift Managerr {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Shift Manager</label>
    <loops>
        <name>Loop_Through_Pre_Defined_Template_Schedules</name>
        <label>Loop Through Pre-Defined Template Schedules</label>
        <locationX>1149</locationX>
        <locationY>547</locationY>
        <assignNextValueToReference>OriginalTemplateSchedule</assignNextValueToReference>
        <collectionReference>Get_Template</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Day_Types</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Template_Schedules_Loop</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Template_Schedules_Loop</name>
        <label>Template Schedules Loop</label>
        <locationX>1866</locationX>
        <locationY>546</locationY>
        <assignNextValueToReference>TemplateSchedule</assignNextValueToReference>
        <collectionReference>SplitTemplateSchedules</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_Current_Days</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_Shifts</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>Create_Shifts</name>
        <label>Create Shifts</label>
        <locationX>1865</locationX>
        <locationY>357</locationY>
        <connector>
            <targetReference>Clear_Shifts</targetReference>
        </connector>
        <inputReference>Shifts</inputReference>
    </recordCreates>
    <recordLookups>
        <name>Get_Primary_Territory</name>
        <label>Get Primary Territory</label>
        <locationX>506</locationX>
        <locationY>546</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>General_Assignments</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ServiceResourceId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>SelectedResourceId</elementReference>
            </value>
        </filters>
        <filters>
            <field>TerritoryType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>P</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ServiceTerritoryMember</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Template</name>
        <label>Get Template</label>
        <locationX>1030</locationX>
        <locationY>547</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Template_Schedules_Found</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Shift_Template__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>ShiftTemplateId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Template_Schedule__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <runInMode>DefaultMode</runInMode>
    <screens>
        <name>Create_Shift</name>
        <label>Create Shift</label>
        <locationX>390</locationX>
        <locationY>546</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Multi_Day_Consecutive</targetReference>
        </connector>
        <fields>
            <name>Resource</name>
            <extensionName>flowruntime:lookup</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>objectApiName</name>
                <value>
                    <stringValue>Shift</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>Resource</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>fieldApiName</name>
                <value>
                    <stringValue>ServiceResourceId</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>required</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <isRequired>true</isRequired>
            <outputParameters>
                <assignToReference>SelectedResourceId</assignToReference>
                <name>recordId</name>
            </outputParameters>
        </fields>
        <fields>
            <name>SchedulingTypeSelection</name>
            <choiceReferences>Manual</choiceReferences>
            <choiceReferences>Templated</choiceReferences>
            <choiceReferences>DefaultScheduleTypeChoice</choiceReferences>
            <dataType>String</dataType>
            <defaultSelectedChoiceReference>DefaultScheduleTypeChoice</defaultSelectedChoiceReference>
            <fieldText>Scheduling Type</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>ManualDays</name>
            <choiceReferences>Days</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Day(s)</fieldText>
            <fieldType>MultiSelectCheckboxes</fieldType>
            <helpText>&lt;p&gt;&lt;span style=&quot;color: rgb(62, 62, 60); background-color: rgb(255, 255, 255);&quot;&gt;One Shift will be created for each Day selected per week occurring within in the Start and End Period. If Multi-Day Shift is selected, then the selected Days selected must be consecutive and only one shift will be created per week occurring within in the Start and End Period.&lt;/span&gt;&lt;/p&gt;</helpText>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>ValidationText1</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;font-size: 11px; color: rgb(255, 0, 0);&quot;&gt;{!ConsecutiveDaysError}&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>ConsecutiveDaysValidation</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <booleanValue>false</booleanValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>MultiDay</name>
            <dataType>Boolean</dataType>
            <defaultValue>
                <elementReference>MultiDay</elementReference>
            </defaultValue>
            <fieldText>Multi-Day Shift</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <validationRule>
                <errorMessage>&lt;p&gt;If Multi-Day is selected, then more than one consecutive day must be selected.&lt;/p&gt;</errorMessage>
                <formulaExpression>NOT({!MultiDay}) || ({!MultiDay} &amp;&amp; Contains({!ManualDays}, &quot;;&quot;))</formulaExpression>
            </validationRule>
        </fields>
        <fields>
            <name>ManualStart</name>
            <dataType>DateTime</dataType>
            <defaultValue>
                <elementReference>ManualStart</elementReference>
            </defaultValue>
            <fieldText>Period Start &amp; Shift Start Time**</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <validationRule>
                <errorMessage>&lt;p&gt;The Period Start and End cannot span more than three months.&lt;/p&gt;</errorMessage>
                <formulaExpression>{!ManualEnd} - {!ManualStart} &lt; 95</formulaExpression>
            </validationRule>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>SchedulingTypeSelection</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>Manual</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>ManualEnd</name>
            <dataType>DateTime</dataType>
            <defaultValue>
                <elementReference>ManualEnd</elementReference>
            </defaultValue>
            <fieldText>Period End &amp; Shift End Time**</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <validationRule>
                <errorMessage>&lt;p&gt;The Period End cannot be before the Period Start and cannot be more than 4 months in the future.&lt;/p&gt;</errorMessage>
                <formulaExpression>(({!ManualEnd} - NOW()) &lt; 120) &amp;&amp; ({!ManualEnd} &gt; {!ManualStart})</formulaExpression>
            </validationRule>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>SchedulingTypeSelection</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>Manual</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>Template</name>
            <extensionName>flowruntime:lookup</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>fieldApiName</name>
                <value>
                    <stringValue>Shift_Template__c</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>Template</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>objectApiName</name>
                <value>
                    <stringValue>Template_Schedule__c</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>recordId</name>
                <value>
                    <elementReference>ShiftTemplateId</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>required</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <isRequired>true</isRequired>
            <outputParameters>
                <assignToReference>ShiftTemplateId</assignToReference>
                <name>recordId</name>
            </outputParameters>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>SchedulingTypeSelection</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>Templated</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>ValidationText2</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;color: rgb(255, 0, 0); font-size: 11px;&quot;&gt;{!TemplateScheduledNullError}&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Start_Date</name>
            <dataType>Date</dataType>
            <defaultValue>
                <elementReference>Start_Date</elementReference>
            </defaultValue>
            <fieldText>Period Start**</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <validationRule>
                <errorMessage>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(62, 62, 60);&quot;&gt;The Period Start and End cannot span more than three months.&lt;/span&gt;&lt;/p&gt;</errorMessage>
                <formulaExpression>{!End_Date} - {!Start_Date} &lt; 95</formulaExpression>
            </validationRule>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>SchedulingTypeSelection</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>Templated</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>End_Date</name>
            <dataType>Date</dataType>
            <defaultValue>
                <elementReference>End_Date</elementReference>
            </defaultValue>
            <fieldText>Period End**</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <validationRule>
                <errorMessage>&lt;p&gt;&lt;span style=&quot;color: rgb(62, 62, 60); background-color: rgb(255, 255, 255);&quot;&gt;The Period End cannot be before the Period Start and cannot be more than 4 months in the future.&lt;/span&gt;&lt;/p&gt;</errorMessage>
                <formulaExpression>(({!End_Date} - TODAY()) &lt; 120) &amp;&amp; ({!End_Date} &gt;= {!Start_Date})</formulaExpression>
            </validationRule>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>SchedulingTypeSelection</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>Templated</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>Disclaimer</name>
            <fieldText>&lt;p&gt;**Shifts times are scheduled based on the selected resource&apos;s primary service territory timezone and factor in daylight savings time.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>StatusPicklist</name>
            <choiceReferences>Status</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Status</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Type</name>
            <choiceReferences>JobType</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Type</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Add_more_shifts</name>
            <dataType>Boolean</dataType>
            <defaultValue>
                <elementReference>Add_more_shifts</elementReference>
            </defaultValue>
            <fieldText>Add more shifts</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <start>
        <locationX>50</locationX>
        <locationY>546</locationY>
        <connector>
            <targetReference>Create_Shift</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>AdjustedConvertedEndDateTime</name>
        <dataType>DateTime</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ConsecutiveDaysBoolean</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>ConvertedEndDateTime</name>
        <dataType>DateTime</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ConvertedStartDateTime</name>
        <dataType>DateTime</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Counter</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>CurrentDays</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>GeneratedTemplateSchedule</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Template_Schedule__c</objectType>
    </variables>
    <variables>
        <name>OriginalTemplateSchedule</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Template_Schedule__c</objectType>
    </variables>
    <variables>
        <name>PeriodEndDate</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>PeriodStartDate</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>SelectedDays</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>SelectedResourceId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>SelectedScheduleTypeChoice</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <elementReference>Templated</elementReference>
        </value>
    </variables>
    <variables>
        <name>Shift</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Shift</objectType>
    </variables>
    <variables>
        <name>Shifts</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Shift</objectType>
    </variables>
    <variables>
        <name>ShiftTemplateId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>SplitTemplateSchedules</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Template_Schedule__c</objectType>
    </variables>
    <variables>
        <name>TemplateSchedule</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Template_Schedule__c</objectType>
    </variables>
    <variables>
        <name>TemplateSchedulesNullBoolean</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>TimeZone</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
