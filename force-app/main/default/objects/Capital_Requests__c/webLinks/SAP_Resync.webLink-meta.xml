<?xml version="1.0" encoding="UTF-8"?>
<WebLink xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>SAP_Resync</fullName>
    <availability>online</availability>
    <displayType>button</displayType>
    <linkType>javascript</linkType>
    <masterLabel>SAP Resync</masterLabel>
    <openType>onClickJavaScript</openType>
    <protected>false</protected>
    <url>{!REQUIRESCRIPT(&quot;/soap/ajax/32.0/connection.js&quot;)}
{!REQUIRESCRIPT(&quot;/soap/ajax/32.0/apex.js&quot;)}

var recordID = &quot;{!Capital_Requests__c.Id}&quot;;
var status = &quot;{!Capital_Requests__c.Status__c}&quot;;
var projectName = &quot;{!Capital_Requests__c.Project_Name__c}&quot;;

//alert(&quot;recordID ===&gt;&gt;&gt;&quot;+recordID+&quot;status ===&gt;&gt;&quot;+status+&quot;projectName====&gt;&gt;&gt;&quot;+projectName);
if({!Capital_Requests__c.Status__c}= &quot;Approved&quot; &amp;&amp; {!ISNULL(Capital_Requests__c.SAP_CFR_Number__c)} )
{
alert(&quot;Do you want to Resync to SAP&quot;);
sforce.apex.execute(&quot;HRC_CapitalRequestAPI&quot;,&quot;apexcallout&quot;,{status:status,projectName:projectName,capitalReqId:recordID});
window.location.reload();
}else{
//alert(&quot;else&quot;);
}</url>
</WebLink>
