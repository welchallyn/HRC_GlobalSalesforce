<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>HRCFSL_Prevent_DT_And_AT_Change</fullName>
    <active>true</active>
    <description>Validation Rule on Work Order that prohibits changing the field values of Doc. Type &amp; Activity Type</description>
    <errorConditionFormula>AND( 

OR(ISCHANGED( HRCFSL_Doc_Type__c ),
          ISCHANGED(  HRCFSL_Activity_Type__c )
),

NOT($Setup.HRCFSL_Org_Exception_Rule__c.HRCFSL_Validation_Rule__c ),

OR( NOT(ISBLANK(PRIORVALUE( HRCFSL_Activity_Type__c ))), NOT(ISBLANK(PRIORVALUE(  HRCFSL_Doc_Type__c  ))) ),

OR( NOT( PRIORVALUE(HRCFSL_Activity_Type__c) =   TEXT(HRCFSL_Activity_Type__c)   ), NOT(PRIORVALUE(  HRCFSL_Doc_Type__c  ) =   TEXT(HRCFSL_Doc_Type__c)  )) 
)</errorConditionFormula>
    <errorMessage>It&apos;s not allowed to change the Doc. Type or Activity Type on a Work Order. If needed, cancel the current Work Order and create a new one.</errorMessage>
</ValidationRule>
